{% extends "base.html" %}

{% load i18n %}
{% load static %}
{% load good_delivery_tags %}

{% block menu_links %}
{% include 'operator_menu.html' %}
{% endblock menu_links %}

{% block container_inner %}
<div class="pb-4 clearfix">
    <p>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
    eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim
    ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut
    aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit
    in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
    </p>
    <div class="pull-left">
        <a role="button" class="btn btn-outline-secondary"
           href="{% url 'good_delivery:operator_active_campaigns' %}">
            <svg class="icon icon-xs">
                <use xlink:href="{% static 'svg/sprite.svg' %}#it-arrow-left"></use>
            </svg> {% trans "Torna alla Dashboard" %}
        </a>
        <a role="button" class="btn btn-outline-secondary"
           href="{% url 'good_delivery:operator_campaign_detail' campaign.pk %}">
            <svg class="icon icon-xs">
                <use xlink:href="{% static 'svg/sprite.svg' %}#it-arrow-left"></use>
            </svg> {% trans "Torna a" %} {{ campaign }}
        </a>
    </div>
    <div class="pull-right">
        <a href="{% url 'good_delivery:operator_new_delivery_preload' campaign.pk reservation.pk %}"
           role="button" class="btn btn-success">
            <span>{% trans "Effettua una consegna" %}</span>
        </a>
    </div>
</div>
<div class="pb-4">
    {% if not reservation %}
    <div class="alert alert-danger" role="alert">
        {% trans "L'utente non ha effettuato prenotazioni per la campagna selezionata" %}
    </div>
    {% else %}
        {% if good_deliveries %}
        <div class="row" id="categories-grid">
            {% for delivery in good_deliveries %}
            <div class="col-12 col-lg-4 category-box">
                <!--start card-->
                <div class="card-wrapper card-space">
                  <div class="card card-bg no-after">
                    <div class="card-body">

                        {% include "delivery_details.html" %}

                        {% if good_delivery.created_by.delivery_point.campaign.is_in_progress %}
                        <a href="{% url 'good_delivery:operator_good_delivery_detail' campaign.pk reservation.pk good_delivery.pk %}"
                           role="button"
                           class="btn btn-outline-success btn-sm btn-block">
                            <span>
                                <svg class="icon icon-success icon-xs">
                                  <use xlink:href="{% static 'svg/sprite.svg' %}#it-settings"></use>
                                </svg>
                                {% trans "Gestione consegna" %}
                            </span>
                        </a>
                        {% endif %}
                    </div>
                  </div>
                </div>
                <!--end card-->
            </div>
          {% endfor %}
        </div>
        {% else %}
        <div class="alert alert-info" role="alert">
            <h4 class="alert-heading">{% trans "Avviso" %}</h4>
            <p>{% trans "Non risultano operazioni di consegna a carico dell'utente" %}</p>
        </div>
        {% endif %}

    {% endif %}
</div>
{% endblock container_inner %}
